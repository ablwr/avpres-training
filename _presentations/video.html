---
layout: presentation
title: Video
---
This page intentionally left blank. â¬‡ï¸, â¡ï¸, or spacebar ğŸ›° to start slidedeck.
---
class: middle    
### ğŸ“¼
### ğŸ“¼ ğŸ“¼ ğŸ“¼
### ğŸ“¼ ğŸ“¼ ğŸ“¼ ğŸ“¼ ğŸ“¼
### ğŸ“¼ ğŸ“¼ ğŸ“¼ ğŸ“¼ Video
### ğŸ“¼ ğŸ“¼ ğŸ“¼ ğŸ“¼ ğŸ“¼
### ğŸ“¼ ğŸ“¼ ğŸ“¼ 
### ğŸ“¼
---
# What is Video?

- Container 
- Codecs 
- Streams 
- Colorspaces 
- Compression
- Chroma subsampling
- Television display 
- Pixel width  
- Resolutions 
- Frame rates 
- Aspect ratios 
- Interlacing 
- 3D and beyond

---

# Containers 

These may also be known as "formats" or "wrappers."

[Full list supported by FFmpeg](https://www.ffmpeg.org/general.html#Supported-File-Formats_002c-Codecs-or-Features)

---
# Some popular containers (video)

- AVI 
- Matroska (.mkv, .mk3d, .mka, .mks, .webm)
- MP4 
- MXF 
- Ogg 
- Quicktime (.mov, .qt)

---
# Some popular containers (audio)

- AAC 
- AIFF
- FLAC 
- MP3 
- Ogg 
- WAV

---
# Codecs

A codec is an encoder/decoder responsible for a video or audio stream in a video file.

[Full list supported by FFmpeg](https://www.ffmpeg.org/general.html#Supported-File-Formats_002c-Codecs-or-Features)

---
# Some popular codecs (video)

- Daala 
- Dirac
- DV
- GIF ğŸ˜
- HuffYUV
- JPEG2000 ğŸ“Ÿ
- FFV1 
- ProRes 
- VP8 (4:2:0 8-bit)
- v210 (Uncompressed 4:2:2 10-bit)
- x264
- x265

---
# Some popular codecs (audio)

You'll see some repeats from the containers section. 

- AAC 
- FLAC 
- PCM (Uncompressed)
- MP3 
- Ogg 
- Opus

---
# Both?

I know, sometimes it can get confusing because the wrapper and the codec have the same name. Sometimes it's because they can only be used with each other.

For example, the Windows Media Player container can only contain the Windows Media Player codec. They are tied together in that way.

Other containers, especially open ones, do not care about the bitstream inside (or they care... less).

---
# Streams

- General/metadata
- Video
- Audio
- Subtitles/text
- Chapters

The extent and availability of the above is contingent on the parameters of the container in use.  

---
# Colorspaces

How is color organized, translated, conveyed, and presented?  

- RGB 
- YUV  
- YCbCr 
- YCoCg
- and more

---
# RGB 

Red, Green, Blue, like most modern computer monitors.
 
---
# YUV 

- Y = luma (brightness)
- U and V = chrominance (color)

U and V are **red-difference** and **blue-difference**

Sometimes people say YUV when they actually mean something else:

---
# YCbCr / YPbPr

- Y = luma (brightness)
- Cb and Cr = chrominance (color)

Cb and Cr are **blue-difference** and **red-difference**

YPbPr: Analog components... kindaaaaa

---
# YCoCg 

- Y = luma (brightness)
- Co and Cg = chrominance (color)

Co and Cg re **orange-difference** and **green-difference**

---
# Compression 

- Uncompressed: Raw data stream  
- Compressed: Data is smushed in some way, but can be un-smushed  
- Losslessly compressed: Data is smushed and this cannot be undone 

---
# Chroma subsampling 

A thing we do because human eyes can't really see color that well. Chroma subsampling is "the practice of encoding images by implementing less resolution for chroma information than for luma information."

Some common ones for preservation (because we want the best): 
- 4:4:4 (not actually subsampling)
- 4:2:2 (this is broadcast standard)
- 4:2:0 (also common in production)

Remember that in video, chroma is in both the Cb and Cr channels so each get subsampled.

---
# Chroma subsampling, explained 

What do these numbers mean? 

x:y:z  
x = width (horizontal) of sample size  
y = number of chroma samples in the first row  
z = number of chroma samples in the second row   

---
# Chroma subsampling, explained 

â¬›ï¸ = checked pixel  
â¬œï¸ = ignored pixel  

- 4:4:4 is full chroma and not subsampling at all because everything is being sampled.  
â¬›ï¸ â¬›ï¸ â¬›ï¸ â¬›ï¸  
â¬›ï¸ â¬›ï¸ â¬›ï¸ â¬›ï¸  

- 4:2:2 is checking every other pixel horizontally and vertically  
â¬›ï¸ â¬œï¸ â¬›ï¸ â¬œï¸  
â¬›ï¸ â¬œï¸ â¬›ï¸ â¬œï¸ 

- 4:2:0 is checking every other pixel horizontally but not vertically   
â¬›ï¸ â¬œï¸ â¬›ï¸ â¬œï¸  
â¬œï¸ â¬œï¸ â¬œï¸ â¬œï¸  


---
# Television display systems 

Good news, there are only three systems: 

- NTSC 
- PAL 
- SECAM 

Bad news, they are completely incompatible with each other.

---
# NTSC 

*National Television Standards Committee*  

Developed in the USA in 1954.

- Lines: 525
- Frame rate: 29.97 Hz
- Picture resolutions: 720x480; 704x480; 352x480; 352x240

---
# PAL 

*Phase Alternating Line*

Developed in 1967 by the United Kingdom & Germany.

- Lines: 625
- Frame rate: 25 Hz
- Picture resolution: 720x576; 704x576; 352x576; 352x288

---
# SECAM 

*SÃ©quentiel couleur Ã  mÃ©moire* ("Sequential colour with memory")

Developed in France in 1967. 

SECAM uses the same bandwidth and resolution (720x576) as PAL but transmits color differently.

---
# Display resolutions

![]({{ site.baseurl }}/img/resolution-standards.png)  
<small>By Jedi787plus - https://en.wikipedia.org/wiki/File:Vector_Video_Standards4.svg, GFDL, https://commons.wikimedia.org/w/index.php?curid=37694717</small>

---
# Display resolutions

But of course it's even more complicated than that. 

---
# Pixel Aspect Ratio

Wait -- pixels can be different SIZES?  

![]({{ site.baseurl }}/img/elmo-in-hell.gif)

---
# Ahem... Pixel Aspect Ratio

That's right, just when you think you were started to understand how video works...

- PAR 
- SAR 
- DAR 

---
# Frame rates 

How fast do things go? 

- Pre-video rates
- 24
- 25 
- 29.97
- 48 
- and more 

---
# Aspect ratios 

- 4:3 (1.33:1) 	  SD
- 16:9 (1.77:1) 	HD
- 21:9 (2.35:1) 	Movies
- 19:10 (1.9:1) 	IMAX
- and more

Practice: [Beyonce game](https://ablwr.github.io/beyonce_quiz/)  

---
# Interlacing 

Interlacing is for optimizing perceived motion in lossy video. 

.center[![]({{ site.baseurl }}/img/interlacing.png)]

---
# Interlacing 

"Interlacing issues can be seen during movement, where squiggly lines appear in places of motion. The concept of interlacing involves each frame containing 50% of the line information required for a full picture, and having even and odd frames play back half of the information quickly enough would result in a full-looking image. This was done because it was faster to send video signals, like in the case of television, when this kind of technique is used. Now it just lingers around making everything look like garbage."
-- [Format-ion: Video playback errors in BeyoncÃ©â€™s latest music video](https://ablwr.github.io/blog/2016/02/08/format-ion-video-playback-errors-in-beyonces-latest-music-video/)

---
# TFF, BFF 

TFF = Top Field First (TFF)
BFF = Bottom Field First (BFF)

When interlacing, every other line is skipped. Which gets skipped depends on if the Scan Order is set to TFF or BFF. 

---
# De-interlacing 

MBAFF	Macroblock-Level Adaptive Frame/Field 
PAFF Picture Adaptive Frame Field


* PAFF allows to decide, on a frame basis, whether to encode each frame as a frame or as two fields. When encoded as two fields, it's as if you would have done a separatefields() on the frame.
* MBAFF allows to decide, on a macroblock basis, whether to encode as field or frame. Actually, it works on vertical pairs of macroblocks, so on 16x32 areas. You can easily put two frame macroblocks ( on under the other ), or two field ones ( one with the top lines, the other with the bottom lines ).  

[source](http://forum.doom9.org/showthread.php?p=927647) 

---
# 3D and beyond?

- 3D 
- 360 video 
- Virtual Reality
- all of the above???

---
# Additional Resources

- [Chroma Sampling: An Investigation](http://www.nattress.com/Chroma_Investigation/chromasampling.htm)
- [Charles Poynton / Chroma subsampling notation](http://poynton.ca/PDFs/Chroma_subsampling_notation.pdf)
- [Computerphile - Compression](https://www.youtube.com/watch?v=Lto-ajuqW3w)
- [h264 is Magic](https://sidbala.com/h-264-is-magic/) (a primer for compression)
- [How JPG Works](https://medium.freecodecamp.org/how-jpg-works-a4dbd2316f35) (similar to above)
- [Lurker's Guide to Video Systems](https://lurkertech.com/lg/video-systems/)
- [PAR, SAR, and DAR: Making Sense of Standard Definition (SD) video pixels](https://www.bavc.org/blog/par-sar-and-dar-making-sense-standard-definition-sd-video-pixels)
- [Sustaining Consistent Video Presentation](http://www.tate.org.uk/about-us/projects/pericles/sustaining-consistent-video-presentation)

---
# Learning more 

- [FFmpeg]({{ site.baseurl }}/presentations/ffmpeg.html)   
- [MediaInfo]({{ site.baseurl }}/presentations/mediainfo.html)  
- [QCTools]({{ site.baseurl }}/presentations/qctools.html)  

[Home]({{ site.baseurl}}/) 